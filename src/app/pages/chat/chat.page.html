<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Chat</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content padding>

  <div class="container-fluid mb-60px pb-2 align-middle">
    <div *ngIf="update;">
      <p>
        <!-- <ngb-alert type="primary" [dismissible]="false"> -->
        <span>New version available
          <button class="btn btn-primary float-right" (click)="activateUpdate()">Update</button>
          <br>
        </span>
        <!-- </ngb-alert> -->
      </p>
    </div>

    <ion-label>
      Members:
    </ion-label>
    <app-chat-user-list [user]="me" (onNewConvo)="setNewConvo($event)" pageScroll href="#chat"></app-chat-user-list>
    <ion-label>
      Conversations:
    </ion-label>
    <ion-item>
      <app-chat-convo-list [user]="me" [current]="conversation" (onConvoClick)="setNewConvo($event)" pageScroll href="#chat"></app-chat-convo-list>
    </ion-item>

    <div class="col-sm-8 p-1" id="chat">
      <div *ngIf="conversation; else instructions">
        <app-chat-message-view #messageView [senderId]="me.id" [conversation]="conversation"></app-chat-message-view>
        <app-chat-input [conversation]="conversation" [senderId]="me.id"></app-chat-input>
      </div>
    </div>
  </div>

  <ng-template #instructions>
    <div class="bg rounded p-2 border border-dark rounded text-center instructions">
      <p class="p-5 m-5 h5 text-white instructions-text">Welcome,
        <strong>{{me?.username}}</strong>! Select a User or a Conversation to start or continue a chat</p>
    </div>
  </ng-template>
</ion-content>